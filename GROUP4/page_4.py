import importlib
import streamlit as st

def show():

    st.markdown("""
    # å››ã€ ä¾‹é¢˜åˆ†æ
        
## $H_2O$
æ°´åˆ†å­å±äº$C_{2v}$ç‚¹ç¾¤ï¼š  
å¯¹äºæ°´åˆ†å­çš„ä¸‰ä¸ªåŸå­ï¼š$O$ã€$H_1$ã€$H_2$åˆ†åˆ«å­˜åœ¨åœ¨xã€yã€zä¸‰ä¸ªç»´åº¦çš„æåŒ–ç‡åˆ†é‡ã€‚
ä¸‰ä¸ªåŸå­çš„ä¸‰ä¸ªç»´åº¦çš„æåŒ–ç‡åˆ†é‡ç»„åˆæˆæ•´ä¸ªåŸå­çš„è¿åŠ¨æ–¹å¼ã€‚å¯¹äºä¸åŒçš„å¯¹ç§°æ–¹å¼ï¼Œ
åŸå­æ²¿è¯¥è½´çš„è¿åŠ¨å¯èƒ½æ˜¯ç›¸åŒã€ç›¸åã€æ²¡æœ‰è¿åŠ¨ï¼Œåˆ†åˆ«å¯¹åº”1ã€-1å’Œ0ã€‚è¿›è¡Œåˆ—è¡¨ç»Ÿè®¡ï¼Œå¯ä»¥å¾—åˆ°ï¼š


|$$C_v$$      | $$E$$   |$$C_2$$ |$$\sigma_{xz}$$ |$$\sigma_{yz}$$|
|--------|-------- |--------|--------|-------- | 
|$$q_1(X_O)$$ | 1 | -1 |1 |-1 |
|$$q_2(Y_O)$$ | 1 | -1 |-1 |1 |
|$$q_3(Z_O)$$ | 1 | 1 |1 |1 |
|$$q_4(X_{H1})$$ | 1 | 0 |1  |0 |
|$$q_5(Y_{H1})$$ | 1 | 0 |-1  |0 |
|$$q_6(Z_{H1})$$ | 1 | 0 |1  |0|
|$$q_7(X_{H2})$$ | 1 | 0 |1  |0 | 
|$$q_8(Y_{H2})$$ | 1 | 0 |-1  |0 |
|$$q_9(Z_{H2})$$ | 1 | 0 |1  |0 |
|$$\Gamma$$ | 9  | -1 |3 |1|



æ ¹æ®$C_{2v}$ç‰¹å¾æ ‡è¡¨

|$$C_v$$      | $$E$$   |$$C_2$$ |$$\sigma_{xz}$$ |$$\sigma_{yz}$$
|:--------|:-------- |:--------|:--------|:-------- | 
|$$A_1$$ | 1 | 1 |1 |1 |
|$$A_2$$| 1 | 1 |-1 |-1 |
|$$B_1$$ | 1 | -1 |1 |-1 |
|$$B_2$$ | 1 | -1 |-1  |1 |
|$$\gamma$$|4|0|0|0|

æˆ‘ä»¬å¯ä»¥è¿›è¡Œçº¦åŒ–ï¼š

$$a_{A1}=(1/4)[9\\times 1+(-1)\\times 1+3\\times 1+1\\times 1]=3$$

$$a_{A2}=(1/4)[9\\times 1+(-1)\\times 1+3\\times (-1)+1\\times (-1)]=1$$

$$a_{B1}=(1/4)[9\\times 1+(-1)\\times (-1)+3\\times 1+1\\times (-1)]=3$$

$$a_{B2}=(1/4)[9\\times 1+(-1)\\times (-1)+3\\times (-1)+1\\times 1]=2$$

å¾—åˆ°ä¸å¯çº¦è¡¨ç¤º 

$$\Gamma=3A_1\oplus A_2\oplus 3B_1\oplus 2B_2$$

æ ¹æ®$C_{2v}$ç‰¹å¾æ ‡è¡¨å¯ä»¥çŸ¥é“3ä¸ªä¸å¯çº¦å¹³åŠ¨è¡¨ç¤ºä¸º$A_1ã€B_1ã€B_2$;

3ä¸ªä¸å¯çº¦è½¬åŠ¨è¡¨ç¤ºä¸º$A_2ã€B_1ã€B_2$
|$$C_v$$      | $$E$$   |$$C_2$$ |$$\sigma_{xz}$$ |$$\sigma_{yz}$$|||
|:--------|:-------- |:--------|:--------|:-------- |:-------- |:-------- | 
|$$A_1$$ | 1 | 1 |1 |1 |$$z$$|$$x^2,y^2,z^2$$|
|$$A_2$$ | 1 | 1 |-1 |-1 |$$R_z$$|$$xy$$|
|$$B_1$$ | 1 | -1 |1 |-1 |$$x,R_y$$|$$xz$$|
|$$B_2$$ | 1 | -1 |-1  |1 |$$y,R_x$$|$$yz$$|
|$$\gamma$$|4|0|0|0| | |

å‰©ä¸‹éƒ¨åˆ†ä¸ºæ­£åˆ™æŒ¯åŠ¨

$3A_1\oplus A_2\oplus 3B_1\oplus 2B_2$â€”â€”å…¨éƒ¨å¯¹ç§°ç±»å‹
*****
$A_1\oplus B_1\oplus B_2$â€”â€”å¹³åŠ¨

$A_2\oplus B_1\oplus B_2$â€”â€”è½¬åŠ¨

$2A_1\oplus B_1$â€”â€”æ­£åˆ™æŒ¯åŠ¨å¯¹ç§°ç±»å‹
è‹¥æ­£åˆ™æŒ¯åŠ¨çš„å¯¹ç§°ç±»å‹ä¸å¶æçŸ©çš„æŸä¸ªåˆ†é‡x, y, zå±äºåŒä¸€ä¸ªä¸å¯çº¦è¡¨ç¤ºï¼Œå³ä¸ºçº¢å¤–æ´»æ€§ï¼›

è‹¥æ­£åˆ™æŒ¯åŠ¨çš„å¯¹ç§°ç±»å‹ä¸æåŒ–ç‡çš„æŸä¸ªåˆ†é‡ï¼Œå³x, y, zçš„äºŒå…ƒä¹˜ç§¯å±äºåŒä¸€ä¸ªä¸å¯çº¦è¡¨ç¤ºï¼Œå³ä¸ºRamanæ´»æ€§ã€‚
å› æ­¤å¯ä»¥åˆ¤æ–­ä¸‰ç§æ­£åˆ™æŒ¯åŠ¨:

ä¸¤ç§æ­£åˆ™è¿åŠ¨å±äº$A_1$:
    
$A_1$çš„åŸºä¸º$ğ‘§ã€ğ‘¥^2,ğ‘¦^2,ğ‘§^2$ï¼Œå…·æœ‰çº¢å¤–æ´»æ€§å’ŒRamanæ´»æ€§ï¼›
    
ä¸€ç§æ­£åˆ™è¿åŠ¨å±äº$B1$:
    
$B_1$çš„åŸºä¸º$ğ‘¥,ğ‘…_ğ‘¦ã€ğ‘¥ğ‘§$ï¼Œå…·æœ‰çº¢å¤–æ´»æ€§å’ŒRamanæ´»æ€§ï¼›
""")
    import plotly.graph_objects as go
    import numpy as np

# æ¨¡æ‹Ÿæ•°æ®
# t = np.linspace(0, 10, 50)
# x, y, z = np.cos(t), np.sin(t), t
# x = 0, 0, 0
# y = 2, 0, 0
# z = -2*np.sin(14.5), 2*np.cos(14.5), 0

    x = 0.5, 0, -0.5*np.sin(0.253)
    y = 0, 0, 0.5*np.cos(0.253)
    z = 0, 0, 0

    fig = go.Figure(data=[go.Scatter3d(
        x=x,  # è®¾ç½®3ä¸ªä¸åŒçš„åæ ‡æ•°æ®
        y=y, 
        z=z,
        mode='lines+markers')])  # 'lines', 'markers', 'text'  3ç§æƒ…å†µçš„ç»„åˆ

    st.plotly_chart(fig)
    
    st.markdown("""
        ## $NH_3$
 æ°´åˆ†å­å±äº$C_{3v}$ç‚¹ç¾¤ï¼š  
å¯¹äºæ°¨æ°”åˆ†å­çš„å››ä¸ªåŸå­ï¼š$N$ã€$H_1$ã€$H_2$ã€$H_3$åˆ†åˆ«å­˜åœ¨åœ¨xã€yã€zä¸‰ä¸ªç»´åº¦çš„æåŒ–ç‡åˆ†é‡ã€‚ä¸‰ä¸ªåŸå­çš„ä¸‰ä¸ªç»´åº¦çš„æåŒ–ç‡åˆ†é‡ç»„åˆæˆæ•´ä¸ªåŸå­çš„è¿åŠ¨æ–¹å¼ã€‚å¯¹äºä¸åŒçš„å¯¹ç§°æ–¹å¼ï¼ŒåŸå­æ²¿è¯¥è½´çš„è¿åŠ¨åæŠ•å½±åˆ°è¯¥è½´ã€‚è¿›è¡Œåˆ—è¡¨ç»Ÿè®¡ï¼Œå¯ä»¥å¾—åˆ°ï¼š
|$$C_v$$      | $$E$$   |$$C_3$$ |$$C'_3$$ |$$\sigma_{v}$$ |$$\sigma'_{v}$$ |$$\sigma''_{v}$$ |
|--------|-------- |--------|--------|-------- |--------|--------|
|$$q_1(X_N)$$ | 1 | -1/2 |-1/2 |0|-1/2|-1/2
|$$q_2(Y_N)$$ | 1 | -1/2 |-1/2 |-1|1/2|1/2
|$$q_3(Z_N)$$ | 1 | 1 |1 |0|0|0
|$$q_4(X_{H1})$$ | 1 | -1/2 |-1/2 |0|-1/2|-1/2 
|$$q_5(Y_{H1})$$ |  1 | -1/2 |-1/2 |-1|1/2|1/2
|$$q_6(Z_{H1})$$ | 1 | 1 |1 |0|1|1
|$$q_7(X_{H2})$$ | 1 | -1/2 |-1/2 |1|-1/2|-1/2
|$$q_8(Y_{H2})$$ |  1 | -1/2 |-1/2 |-1|1/2|1/2
|$$q_9(Z_{H2})$$ | 1 | 1 |1 |1|0|1
|$$q_10(X_{H3})$$ | 1 | -1/2 |-1/2 |1|-1/2|-1/2
|$$q_11(Y_{H3})$$ |  1 | -1/2 |-1/2 |-1|1/2|1/2
|$$q_12(Z_{H3})$$ | 1 | 1 |1 |1|1|0
|$$\Gamma$$ | 12  | 0 |0 |2|2|2|

æ ¹æ®$C_{3v}$ç‰¹å¾æ ‡è¡¨

|$$C_v$$      | $$E$$   |$$2C_2$$ |$$3\sigma_{xz}$$ |
|:--------|:-------- |:--------|:--------|
|$$A_1$$ | 1 | 1 |1 |
|$$A_2$$| 1 | 1 |-1 |
|$$E$$ | 2 | -1 |0 |
|$$\gamma$$|4|1|0|

æˆ‘ä»¬å¯ä»¥è¿›è¡Œçº¦åŒ–ï¼š

$$a_{A1}=(1/6)[12\times 1+0\times1\times 2+2\times1\times 3]=3$$

$$a_{A2}=(1/6)[12\times 1+0\times1\times 2+2\times(-1)\times 3]=1$$

$$a_{E}=(1/6)[12\times 2+0\times(-1)\times 2+2\times0\times 3]=4$$

å¾—åˆ°ä¸å¯çº¦è¡¨ç¤º $$\Gamma=3A_1\oplus 1 A_2\oplus 4E$$

æ ¹æ®$C_{3v}$ç‰¹å¾æ ‡è¡¨å¯ä»¥çŸ¥é“2ä¸ªä¸å¯çº¦å¹³åŠ¨è¡¨ç¤ºä¸º$A_1ã€E$

2ä¸ªä¸å¯çº¦è½¬åŠ¨è¡¨ç¤ºä¸º$A_2ã€E$

|$$C_v$$      | $$E$$   |$$2C_2$$ |$$3\sigma_{xz}$$ |||
|:--------|:-------- |:--------|:--------|:--------|:--------|
|$$A_1$$ | 1 | 1 |1 |$$Z$$|$$x^2+y^2,z^2$$|
|$$A_2$$| 1 | 1 |-1 |$$R_z$$||
|$$E$$ | 2 | -1 |0 |$$(x,y)(R_x,R_y)$$|$$(x^2-y^2,xy)(xz,yz)$$|
|$$\gamma$$|4|1|0|

å‰©ä¸‹éƒ¨åˆ†ä¸ºæ­£åˆ™æŒ¯åŠ¨

$3A_1\oplus 1 A_2\oplus 4E$â€”â€”å…¨éƒ¨å¯¹ç§°ç±»å‹
*****
$A_1\oplus E$â€”â€”å¹³åŠ¨

$A_2\oplus E$â€”â€”è½¬åŠ¨

$2A_1\oplus 2E$â€”â€”æ­£åˆ™æŒ¯åŠ¨å¯¹ç§°ç±»å‹

å…¶ä¸­Eä¸ºä¸¤é‡ç®€å¹¶ï¼Œå› æ­¤æœ‰6ç§æ­£åˆ™æŒ¯åŠ¨ï¼š2ä¸ª$A_1$ä¸å¯çº¦å’Œ4ä¸ª$E$ä¸å¯çº¦
å› æ­¤å¯ä»¥åˆ¤æ–­å…­ç§æ­£åˆ™æŒ¯åŠ¨:

ä¸¤ç§æ­£åˆ™è¿åŠ¨å±äº$A_1$:
    
$A_1$çš„åŸºä¸º$Z$ã€$x^2+y^2,z^2$ï¼Œå…·æœ‰çº¢å¤–æ´»æ€§å’ŒRamanæ´»æ€§ï¼›
    
å››ç§æ­£åˆ™è¿åŠ¨å±äº$E$:
    
$E$çš„åŸºä¸º$(x,y)(R_x,R_y)$ã€$(x^2-y^2,xy)(xz,yz)$ï¼Œå…·æœ‰çº¢å¤–æ´»æ€§å’ŒRamanæ´»æ€§ï¼›
    
""")
    import plotly.graph_objects as go
    import numpy as np

# æ¨¡æ‹Ÿæ•°æ®
# t = np.linspace(0, 10, 50)
# x, y, z = np.cos(t), np.sin(t), t
# x = 0, 0, 0
# y = 2, 0, 0
# z = -2*np.sin(14.5), 2*np.cos(14.5), 0
# 0,0,0; 0.5,0,0; -np.sin(0.3)*0.5,np.cos(0.3)*0.5,0; -0.15763, -0.15763, 0.44435

    x = 0.5, 0, -np.sin(0.3)*0.5, -0.15763
    y = 0, 0, np.cos(0.3)*0.5, -0.15763
    z = 0, 0, 0, 0.44435

    fig = go.Figure(data=[go.Scatter3d(
        x=x,  # è®¾ç½®3ä¸ªä¸åŒçš„åæ ‡æ•°æ®
        y=y, 
        z=z,
        mode='markers')])  # 'lines', 'markers', 'text'  3ç§æƒ…å†µçš„ç»„åˆ

    st.plotly_chart(fig)
    if 'show_code' not in st.session_state:
        st.session_state.show_code = False
        # åœ¨ä¾§è¾¹æ åˆ›å»ºä¸€ä¸ªå¤é€‰æ¡†æ¥æ§åˆ¶ä»£ç çš„æ˜¾ç¤º
    st.session_state.show_code = st.sidebar.checkbox('æ˜¾ç¤ºä»£ç ', value=st.session_state.show_code)
    if st.session_state.show_code:
        with open(__file__, 'r') as file:
            code = file.read()
        st.markdown("```python\n" + code + "\n```", unsafe_allow_html=True)
    
    
 